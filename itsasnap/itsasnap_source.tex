\documentclass[../gatm.tex]{subfiles}

\begin{document}

\begin{asydef}

int factorial(int n) { // Tail recursion... why not?
	if (n == 0 || n == 1)
		return 1;
	return n * factorial(n - 1);
}

void drawConnect(pair tloffset, int[] mapping = {0}, int cols = 3, real xd = 1, real yd = 1.5) {
	int rows = mapping.length + 1;
	for (int x = 0; x < cols; ++x) {
		for (int y = 0; y < rows; ++y) {
			if (y < rows - 1) {
				int map = mapping[y];
				int[] needs;
				int[] truemap;
				
				for (int c = 0; c < cols; ++c) needs.push(c);
				
				for (int i = 0; i < cols; ++i) {
					int fact = factorial(cols - i - 1);
					
					int egg = map # fact; // Integer division lolololol
					int indx = needs[egg];
					needs.delete(egg);
					
					map %= fact;
					
					draw((tloffset + (i * xd, -y * yd)) -- (tloffset + (indx * xd, (-y-1) * yd)));
				}
			}
			
			dot(tloffset + (x * xd, -y * yd));
		}
	}
}

\end{asydef}

\section{It's a Snap}

\newcommand\snap{\bullet}

\begin{figure}[h]

\begin{center}

\begin{asy}
size(250);

int[] indices = {0,1,5,2,4,3};
string[] labels = {"I", "A", "B", "C", "D", "E"};

for (int i = 0; i < 6; ++i) {
	int[] indx = {indices[i]};
	drawConnect((4 * i, 0), indx);
	label("$" + labels[i] + "$", (4 * i + 1, -2.5));
}
\end{asy}

\caption{The six possibilities for connections between two rows of three posts.}
\label{fig:all_3_cols}
\end{center}

\end{figure}

\begin{figure}[h]
\begin{minipage}{.5\textwidth}
\begin{center}

\begin{asy}
size(0, 60);

int[] ms = {2,5};

drawConnect((0, 0), ms);

// draw(brace((-0.6, -3.2), (-0.6, 0.2), .3), black+1bp);
draw(brace((-0.2, 0.6), (2.2, 0.6), .3), black+1bp);

// label("$n$", (-0.8, -1.5), W);
label("$3$", (1, 0.9), N);

label("$\rightarrow Y$", (2.5, -0.75), E);
label("$\rightarrow X$", (2.5, -2.25), E);

for (int i = 0; i < 3; ++i)
	dot((i, -1.5), filltype=FillDraw(fillpen=white, drawpen=black));
\end{asy}

\caption{A grid with three strings.}
\label{fig:n_rows_3_cols_ex}
\end{center}

\end{minipage}%
\begin{minipage}{.5\textwidth}

\begin{center}
\begin{asy}
size(0, 60);

int[] egg = {5, 1};

drawConnect((0, 0), egg);

int[] newf = {3};

drawConnect((5, 0), newf, 3, 1, 3);
label("$\stackrel{\mbox{\small snap!}}{\Longrightarrow}$", (3.5, -1.5));

draw(brace((-0.6, -3.2), (-0.6, 0.2), .3), white+1bp);
draw(brace((-0.2, 0.6), (2.2, 0.6), .3), white+1bp);

label("$3$", (-0.8, -1.5), W, white);
label("$3$", (1, 0.9), N, white);

label("$B \leftarrow$", (-0.5, -0.75), W);
label("$A \leftarrow$", (-0.5, -2.25), W);

label("$E$", (7.5, -1.5), E);

\end{asy}

\caption{$A\snap B = E$.}
\label{fig:snap_ex}
\end{center}
\end{minipage}

\end{figure}

% Vocabulary: SNAP, GROUP, ELEMENT, SNAP GROUP, IDENTITY ELEMENT

\noindent We begin with a problem that ties together ideas from geometry, complex numbers, matrices, combinatorics, and group theory. You likely studied geometry in 9\textsuperscript{th} grade and complex numbers in 10\textsuperscript{th} grade, so you should have a basis to start this investigation. The other three topics may be a bit unfamiliar at this point.

Consider a grid of posts with $3$ rows and $3$ columns. An elastic string is anchored to one post in the top row and one post in the bottom row. As the string descends from top to bottom, it loops around a post in the middle row. Two other strings are anchored and looped in the same way, with the condition that each post has exactly one string touching it. An example is depicted in Figure~\ref{fig:n_rows_3_cols_ex}.

Figure~\ref{fig:all_3_cols} shows the six ways two rows can be connected with these rules -- convince yourself that these are the only six. I have labeled them as $I$, $A$, $B$, $C$, $D$, and $E$.

Now, look at a $3\times 3$ grid of posts, like the one in Figure~\ref{fig:n_rows_3_cols_ex}. You should have two stacked configurations $X$ and $Y$, with $Y$ is on top of $X$. When you remove the middle posts (the posts indicated by $\circ$), the elastic string will \textbf{snap} to one of the six configurations we drew initially. Let's call this operation ``snap'', or $\snap$, so that $X\snap Y$ reads ``$X$ snap $Y$.'' Keep in mind that when writing it this way, the bottom configuration $X$ goes first, and the top configuration $Y$ goes last. As an example, $A\snap B = E$, as shown in Figure~\ref{fig:snap_ex}.

These six configurations form a mathematical \textbf{group} under the $\snap$ operation, and we say that each configuration is an \textbf{element} of our group. More specifically, we will call this the \textbf{snap group} of size $3$, or $S_3$; there are many other groups to name and we must be precise about which we are talking about. The group is, unsurprisingly, the main concept studied in \textbf{group theory}, a topic mentioned at the beginning of this chapter. Let's study the snap group and characterize its properties.

% https://tex.stackexchange.com/questions/209092/how-do-i-make-every-column-the-same-width
\newcolumntype{C}{>{\centering\arraybackslash}p{1em}}

\begin{figure}
\begin{center}
\begin{tabular}{C|C|C|C|C|C|C|}
$\snap$ & $I$ & $A$ & $B$ & $C$ & $D$ & $E$ \\ \hline
$I$    &   &   &   &   &   &   \\ \hline
$A$    &   &   & $E$ &   &   &   \\ \hline
$B$    &   &   &   &   &   &   \\ \hline
$C$    &   &   &   &   &   &   \\ \hline
$D$    &   &   &   &   &   &   \\ \hline
$E$    &   &   &   &   &   &   \\ \hline
\end{tabular}
\end{center}
\caption{Unfilled $3$-post snap group table.}
\label{fig:sbstable}
\end{figure}

\begin{enumerate}
\item Fill out a $6\times 6$ table like the one in Figure~\ref{fig:sbstable}, showing the results of each of the $36$ possible snaps, where $X\snap Y$ is in $X$'s row and $Y$'s column. $A\snap B=E$ is done for you.
\item Would this table look different if you wrote the elements $A$ through $E$ in a different order? \label{prob:group_definition_start}
\item Which of the elements is the \textbf{identity element} $K$, such that $X\snap K = K\snap X = X$ for all $X$?
\item Does every element have an inverse; can you get to the identity element from every element using only one snap?
\item \begin{enumerate}
\item Is the snap operation commutative (does $X \snap Y = Y \snap X$ for all $X,Y$)?
\item Is the snap operation associative (does $(X \snap Y) \snap Z = X \snap (Y\snap Z)$ for all $X,Y,Z$)?
\end{enumerate}
\item \begin{enumerate}
\item For any elements $X, Y$, is there always an element $Z$ so that $X\snap Z=Y$?
\item For (a), is $Z$ always unique?
\end{enumerate}
\item If you constructed a $5\times 5$ table using only $5$ of the snap elements, the table would not describe a group, because there would be entries in the table not in those $5$. Therefore, a group must be \textbf{closed} under its operation; if $X,Y\in G$ ($\in$ means ``is/are in''), then $X\snap Y\in G$ for all $X,Y$. Some subsets, however, do happen to be closed.

Write valid group tables using exactly $1$, $2$, and $3$ elements from the snap group. These are known as \textbf{subgroups}.\label{prob:group_definition_end}
\item What do you guess is the complete definition of a mathematical group? (Hint: consider your answers to Problems \ref{prob:group_definition_start}--\ref{prob:group_definition_end}.)
\item Notice that $E\snap E\snap E=I$. (See Figure~\ref{fig:eper3}.) This means that $E$ has a \textbf{period} of $3$ when acting upon itself. Which elements have a period of \begin{multicols}{3}
\begin{enumerate}
\item $1$?
\item $2$?
\item $3$?
\end{enumerate}
\end{multicols}
\item Answer the following with the $1$, $2$, and $4$-post snap groups $S_1$, $S_2$ and $S_4$.\begin{enumerate}
\item How many elements would there be?
\item Systematically draw and name them.
\item Make a group table of these elements. For $4$ posts, instead of creating the massive table, give the number of entries that table would have.
\item What is the relationship between this new table and your original table?
\end{enumerate}
\item Can you think of an easier way to generate a snap group table without drawing all the possible configurations?
\item \begin{enumerate}
\item How many elements would there be in the $5$-post snap group? \label{prob:five_post_snap_list_start}
\item How many entries would its table have?
\item What possible periods would its elements have? \label{prob:five_post_snap_list_end}
\item Extend your answers for \ref{prob:five_post_snap_list_start}--\ref{prob:five_post_snap_list_end} to $M$ posts per row.
\end{enumerate}
\item As we learned, a \textbf{permutation} of some things is an order in which they can be arranged. What is the relationship between the set of permutations of $m$ things and the $m$-post snap group?
\end{enumerate}


\begin{figure}
\begin{minipage}{.5\textwidth}

\begin{center}
\begin{asy}
size(0, 60);

int[] indices = {0,1,5,2,4,3};
string[] labels = {"I", "A", "B", "C", "D", "E"};

int[] egg = {3, 3, 3};

drawConnect((0, 0), egg);

int[] newf = {0};

drawConnect((5, 0), newf, 3, 1, 4.5);
label("$\stackrel{\mbox{\small snap!}}{\Longrightarrow}$", (3.5, -2.25));

\end{asy}

\caption{$E\snap E\snap E = I$; $E$ has period $3$.}
\label{fig:eper3}
\end{center}
\end{minipage}%
\begin{minipage}{.4\textwidth}

\begin{center}
\begin{asy}
size(0, 60);

for (int i = 0; i < 24; i += 3) {
	int[] eggf = {i};
	drawConnect((5 / 3 * (i >= 12 ? (i - 12) : i), (i >= 12 ? 5 : 0)), eggf, 4); 
}
\end{asy}

\caption{Some $4$-post group elements.}
\label{fig:fpge}
\end{center}
\end{minipage}
\end{figure}

\end{document}