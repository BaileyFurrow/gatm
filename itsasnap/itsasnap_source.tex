\documentclass[../gatm.tex]{subfiles}

\begin{document}

\begin{asydef}
	int factorial(int n) { // Factorial function for convenience
		if (n == 0 || n == 1)
			return 1;
		return n * factorial(n - 1); // Tail recursion... why not?
	}
	
	// Explanation of mapping integer: Instead of representing the mappings as integer arrays, I represented them as plain integers. No clue why, but I think it's because I thought Asymptote lacked 2D arrays. Anyway, the integer 0 is the identity, which is {1,2,3} in a mapping (start col) => (end col). The integer 1 is A, which is {1,3,2}. The integer 2 is C, which is {2,1,3}... in other words, the integer is the index in the list of permutations for {1,2,...,c-1,c}, where c is the number of columns (cols)
	
	/* This function takes in a pair drawing offset "offset" describing the (x,y) of the top left corner of the snap element, an integer array of mapping integers which will be chained, integer number of columns, an x spacing, and a y spacing (for columns and rows respectively) */
	/* For example, to draw the element A connected with the element B at the location (1,1) with a spacing of 4 between columns and 6 between rows, you would effectively do
	
	drawSnapElements((1,1), // at (1,1)
					 {1,5}, // A, then B
					 3, // 3 columns
					 4, // 4 units between columns
					 6); // 6 units between rows.
	*/
	
	void drawSnapElements(pair offset, int[] mappings = {0}, int cols = 3, real xd = 1, real yd = 1.5) {
		int rows = mappings.length + 1;
		
		for (int x = 0; x < cols; ++x) {
			for (int y = 0; y < rows; ++y) {
				if (y < rows - 1) {
					int map = mappings[y];
					int[] needs; // Which columns (bottom) need to have a line drawn, used in the loop

					for (int c = 0; c < cols; ++c) needs.push(c); // Push all columns onto the needed list

					for (int i = 0; i < cols; ++i) { // This loop is used to convert an integer into the actual mapping, by figuring out which mapping it actually is
						int fact = factorial(cols - i - 1);

						int quotient = map # fact; // OCTOTHORPE = integer division lolololol
						int index = needs[quotient]; // index of column to be drawn
						needs.delete(quotient);

						map %= fact; // Get remainder

						draw((offset + (i * xd, -y * yd)) -- (offset + (index * xd, -(y + 1) * yd))); // Draw the elastic
					}
				}
				dot(offset + (x * xd, -y * yd)); // add the post dot
			}
		}
	}
	
	int[] standard_indices = {0,1,5,2,4,3}; // mapping integers corresponding to I through E
	string[] standard_labels = {"I", "A", "B", "C", "D", "E"}; // for convenience
\end{asydef}

\section{It's a Snap}

\newcommand\snap{\bullet} // Custom command for the "snap" operation

\begin{figure}[h]
	% Figure: side-by-side juxtaposition of all six elements of the three-post snap group, labeled with letters I through E
	\begin{center}
		\begin{asy}
			size(250);
			
			for (int i = 0; i < 6; ++i) { // for every element...
				int[] to_draw = {standard_indices[i]};
				drawSnapElements((4 * i, 0), to_draw); // draw the snap element
				label("$" + standard_labels[i] + "$", (4 * i + 1, -2.5)); // label it with its letter
			}
		\end{asy}

		\caption{The six possibilities for connections between two rows of three posts.}
		\label{fig:all_3_cols}
	\end{center}
\end{figure}

\begin{figure}[h]
	\begin{minipage}{.5\textwidth}
		% Figure: Two, chained snap group elements Y,X (they happen to be C and B) with Y on top of X. Y and X are labeled with arrows, there is a brace showing that the figure is 3 columns wide, and three white-filled dots indicate the middle row which is removed in the snap operation
		\begin{center}
			\begin{asy}
				size(0, 60);

				int[] elements = {2,5}; // C, then B

				drawSnapElements((0, 0), elements); // Draw them
				
				path top_brace = brace((-0.2, 0.6), (2.2, 0.6), .3);

				draw(top_brace, black+1bp); // Draw brace 
				label("$3$", top_brace, N); // Label the brace "3"

				label("$\rightarrow Y$", (2.5, -0.75), E); // Top element is Y
				label("$\rightarrow X$", (2.5, -2.25), E); // Bottom element is X

				for (int i = 0; i < 3; ++i) // Color the middle dots white
					dot((i, -1.5), filltype=FillDraw(fillpen=white, drawpen=black));
			\end{asy}

			\caption{A grid with three strings.}
			\label{fig:n_rows_3_cols_ex}
		\end{center}
	\end{minipage}%
	\begin{minipage}{.5\textwidth}
		% Figure: Two chained snap group elements B,A are labeled with arrows, and are snapped to become E on the right. The arrow is thick and labeled "snap"
		\begin{center}
			\begin{asy}
				size(0, 60);

				int[] starting_elements = {5, 1};

				drawSnapElements((0, 0), starting_elements); // Draw B, then A

				int[] new_elem = {3};

				drawSnapElements((5, 0), new_elem, 3, 1, 3); // Draw E, the result; note that yd is doubled
				label("$\stackrel{\mbox{\small snap!}}{\Longrightarrow}$", (3.5, -1.5));
				/* Looks like:
					  snap!
					  ===>  */

				label("$B \leftarrow$", (-0.5, -0.75), W); // Label the elements as A and B
				label("$A \leftarrow$", (-0.5, -2.25), W);

				label("$E$", (7.5, -1.5), E); // Label the result as E on the right
				
				/* Phantom stuff to make it the same size as the figure on left */				
				
				path top_brace = brace((-0.2, 0.6), (2.2, 0.6), .3);

				draw(top_brace, white+1bp);
				label("$3$", top_brace, N, white);
			\end{asy}

			\caption{$A\snap B = E$.}
			\label{fig:snap_ex}
		\end{center}
	\end{minipage}
\end{figure}

% Vocabulary: SNAP, GROUP, ELEMENT, SNAP GROUP, IDENTITY ELEMENT

\noindent We begin with a problem that ties together ideas from geometry, complex numbers, matrices, combinatorics, and group theory. You likely studied geometry in 9\textsuperscript{th} grade and complex numbers in 10\textsuperscript{th} grade, so you should have a basis to start this investigation. The other three topics may be a bit unfamiliar at this point.

Consider a grid of posts with $3$ rows and $3$ columns. An elastic string is anchored to one post in the top row and one post in the bottom row. As the string descends from top to bottom, it loops around a post in the middle row. Two other strings are anchored and looped in the same way, with the condition that each post has exactly one string touching it. An example is depicted in Figure~\ref{fig:n_rows_3_cols_ex}.

Figure~\ref{fig:all_3_cols} shows the six ways two rows can be connected with these rules -- convince yourself that these are the only six. I have labeled them as $I$, $A$, $B$, $C$, $D$, and $E$.

Now, look at a $3\times 3$ grid of posts, like the one in Figure~\ref{fig:n_rows_3_cols_ex}. You should have two stacked configurations $X$ and $Y$, with $Y$ is on top of $X$. When you remove the middle posts (the posts indicated by $\circ$), the elastic string will \textbf{snap} to one of the six configurations we drew initially. Let's call this operation ``snap'', or $\snap$, so that $X\snap Y$ reads ``$X$ snap $Y$.'' Keep in mind that when writing it this way, the bottom configuration $X$ goes first, and the top configuration $Y$ goes last. As an example, $A\snap B = E$, as shown in Figure~\ref{fig:snap_ex}.

These six configurations form a mathematical \textbf{group} under the $\snap$ operation, and we say that each configuration is an \textbf{element} of our group. More specifically, we will call this the \textbf{snap group} of size $3$, or $S_3$; there are many other groups to name and we must be precise about which we are talking about. The group is, unsurprisingly, the main concept studied in \textbf{group theory}, a topic mentioned at the beginning of this chapter. Let's study the snap group and characterize its properties.

% https://tex.stackexchange.com/questions/209092/how-do-i-make-every-column-the-same-width
\newcolumntype{C}{>{\centering\arraybackslash}p{1em}}

\begin{figure}
	% Figure: partially-filled table for the 3-post snap group
	\begin{center}
		\begin{tabular}{C|C|C|C|C|C|C|}
			$\snap$ & $I$ & $A$ & $B$ & $C$ & $D$ & $E$ \\ \hline
			$I$     &     &     &     &     &     &     \\ \hline
			$A$     &     &     & $E$ &     &     &     \\ \hline
			$B$     &     &     &     &     &     &     \\ \hline
			$C$     &     &     &     &     &     &     \\ \hline
			$D$     &     &     &     &     &     &     \\ \hline
			$E$     &     &     &     &     &     &     \\ \hline
		\end{tabular}
	\end{center}
	\caption{Unfilled $3$-post snap group table.}
	\label{fig:sbstable}
\end{figure}

\begin{enumerate}
	\item Fill out a $6\times 6$ table like the one in Figure~\ref{fig:sbstable}, showing the results of each of the $36$ possible snaps, where $X\snap Y$ is in $X$'s row and $Y$'s column. $A\snap B=E$ is done for you.
	\item Would this table look different if you wrote the elements $A$ through $E$ in a different order? \label{prob:group_definition_start}
	\item Which of the elements is the \textbf{identity element} $K$, such that $X\snap K = K\snap X = X$ for all $X$?
	\item Does every element have an inverse; can you get to the identity element from every element using only one snap?
	\item \begin{enumerate}
		      \item Is the snap operation commutative (does $X \snap Y = Y \snap X$ for all $X,Y$)?
		      \item Is the snap operation associative (does $(X \snap Y) \snap Z = X \snap (Y\snap Z)$ for all $X,Y,Z$)?
	      \end{enumerate}
	\item \begin{enumerate}
		      \item For any elements $X, Y$, is there always an element $Z$ so that $X\snap Z=Y$?
		      \item For (a), is $Z$ always unique?
	      \end{enumerate}
	\item If you constructed a $5\times 5$ table using only $5$ of the snap elements, the table would not describe a group, because there would be entries in the table not in those $5$. Therefore, a group must be \textbf{closed} under its operation; if $X,Y\in G$ ($\in$ means ``is/are in''), then $X\snap Y\in G$ for all $X,Y$. Some subsets, however, do happen to be closed.

	      Write valid group tables using exactly $1$, $2$, and $3$ elements from the snap group. These are known as \textbf{subgroups}.\label{prob:group_definition_end}
	\item What do you guess is the complete definition of a mathematical group? (Hint: consider your answers to Problems \ref{prob:group_definition_start}--\ref{prob:group_definition_end}.)
	\item Notice that $E\snap E\snap E=I$. (See Figure~\ref{fig:eper3}.) This means that $E$ has a \textbf{period} of $3$ when acting upon itself. Which elements have a period of \begin{multicols}{3}
		      \begin{enumerate}
			      \item $1$?
			      \item $2$?
			      \item $3$?
		      \end{enumerate}
	      \end{multicols}
	\item Answer the following with the $1$, $2$, and $4$-post snap groups $S_1$, $S_2$ and $S_4$.\begin{enumerate}
		      \item How many elements would there be?
		      \item Systematically draw and name them.
		      \item Make a group table of these elements. For $4$ posts, instead of creating the massive table, give the number of entries that table would have.
		      \item What is the relationship between this new table and your original table?
	      \end{enumerate}
	\item Can you think of an easier way to generate a snap group table without drawing all the possible configurations?
	\item \begin{enumerate}
		      \item How many elements would there be in the $5$-post snap group? \label{prob:five_post_snap_list_start}
		      \item How many entries would its table have?
		      \item What possible periods would its elements have? \label{prob:five_post_snap_list_end}
		      \item Extend your answers for \ref{prob:five_post_snap_list_start}--\ref{prob:five_post_snap_list_end} to $M$ posts per row.
	      \end{enumerate}
	\item As we learned, a \textbf{permutation} of some things is an order in which they can be arranged. What is the relationship between the set of permutations of $m$ things and the $m$-post snap group?
\end{enumerate}

\begin{figure}
	\begin{minipage}{.5\textwidth}
		% Figure: E snap E snap E = I, so E has a period of 3. Shows three consecutive E elements, then a "snap" arrow and the I element.
		\begin{center}
			\begin{asy}
				size(0, 60);
				
				int[] eggs = {3, 3, 3}; // 3 E elements

				drawSnapElements((0, 0), eggs); // Draw the Es

				int[] new_elem = {0};

				drawSnapElements((5, 0), new_elem, 3, 1, 4.5); // draw the identity element
				label("$\stackrel{\mbox{\small snap!}}{\Longrightarrow}$", (3.5, -2.25));
			\end{asy}

			\caption{$E\snap E\snap E = I$; $E$ has period $3$.}
			\label{fig:eper3}
		\end{center}
	\end{minipage}%
	\begin{minipage}{.4\textwidth}
		% Figure: Draw 8 elements from the 4-post snap group set, and arrange them in a 4 (wide) by 2 (high) rectangle
		\begin{center}
			\begin{asy}
				size(0, 60);

				for (int i = 0; i < 24; i += 3) { // Draw elements 0, 3, ..., 24
					int[] elem = {i};
					drawSnapElements((5 / 3 * (i >= 12 ? (i - 12) : i), (i >= 12 ? 5 : 0)), elem, 4); // TERNARY OPERATOR used to make them into a grid
				}
			\end{asy}

			\caption{Some $4$-post group elements.}
			\label{fig:fpge}
		\end{center}
	\end{minipage}
\end{figure}
\end{document}